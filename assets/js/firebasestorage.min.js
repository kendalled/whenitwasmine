let isAdded = !1,
  container = document.getElementById("progress-bar");
function goBackInForm(e) {
  switch (e) {
    case "orderDetails":
      $this.addClass("hidemepls"),
        $("#styleChoice").fadeIn(),
        bar.animate(0.15);
      break;
    case "contactDetails":
      $contactinfo.addClass("hidemepls2"),
        (document.getElementById("hiddenForm1").style.display = "block"),
        $this.fadeIn(),
        bar.animate(0.65);
      break;
    case "orderDetailsCoin":
      $thiscoin.addClass("hidemepls3"),
        $("#colorChoice").fadeIn(),
        bar.animate(0.15);
      break;
    case "contactDetailsCoin":
      $contactinfocoin.addClass("hidemepls4"),
        (document.getElementById("hiddenForm2").style.display = "block"),
        $thiscoin.fadeIn(),
        bar.animate(0.65);
      break;
    case "orderDetailsChain":
      $thischain.addClass("hidemepls5"),
        $("#chainStyle").fadeIn(),
        bar.animate(0.15);
      break;
    case "contactDetailsChain":
      $contactinfochain.addClass("hidemepls6"),
        (document.getElementById("hiddenForm3").style.display = "block"),
        $thischain.fadeIn(),
        bar.animate(0.65);
  }
}
var bar = new ProgressBar.Line(container, {
  strokeWidth: 1,
  easing: "easeInOut",
  duration: 1400,
  color: "#34a853",
  trailColor: "#eee",
  trailWidth: 1,
  svgStyle: { width: "100%", height: "100%" }
});
function copyToClipboard(e) {
  var t = $("<input>");
  $("body").append(t),
    t.val($(e).text()).select(),
    document.execCommand("copy"),
    t.remove();
}
$(".anchor").on("click", function() {
  $(".box-message")
    .fadeIn(150)
    .delay(600)
    .fadeOut();
});

function addLightbox() {
  if (!isAdded) {
    var e = document.getElementsByTagName("head")[0],
      t = document.createElement("script"),
      n = document.createElement("link");
    (n.rel = "stylesheet"),
      (n.href = "assets/css/lightbox.css"),
      (t.src = "assets/js/lightbox.js"),
      e.appendChild(n),
      e.appendChild(t),
      (isAdded = !0);
  }
}
  $(function() {
    $("#LapelPin").click(function() {
      new Pikaday({ field: document.getElementById("datepicker") });
      (document.getElementById("pinformdiv").style.display = "block"),
        (document.getElementById("coinformdiv").style.display = "none"),
        (document.getElementById("chainformdiv").style.display = "none"),
        (document.getElementById("choice").style.display = "none"),
        (document.getElementById("rstbtn").style.display = "none"),
        (document.getElementById("progress-bar").style.display = "block");
    }),
      $("#ChallengeCoin").click(function() {
        new Pikaday({ field: document.getElementById("datepicker2") });
        (document.getElementById("pinformdiv").style.display = "none"),
          (document.getElementById("coinformdiv").style.display = "block"),
          (document.getElementById("chainformdiv").style.display = "none"),
          (document.getElementById("choice").style.display = "none"),
          (document.getElementById("rstbtn").style.display = "none"),
          (document.getElementById("progress-bar").style.display = "block");
      }),
      $("#Keychain").click(function() {
        new Pikaday({ field: document.getElementById("datepicker3") });
        addLightbox(),
          (document.getElementById("pinformdiv").style.display = "none"),
          (document.getElementById("coinformdiv").style.display = "none"),
          (document.getElementById("chainformdiv").style.display = "block"),
          (document.getElementById("choice").style.display = "none"),
          (document.getElementById("rstbtn").style.display = "none"),
          (document.getElementById("progress-bar").style.display = "block");
      }),
      $("#rstbtn").click(function() {
        (document.getElementById("pinformdiv").style.display = "none"),
          (document.getElementById("coinformdiv").style.display = "none"),
          (document.getElementById("chainformdiv").style.display = "none"),
          (document.getElementById("choice").style.display = "block"),
          (document.getElementById("rstbtn").style.display = "none"),
          (document.getElementById("progress-bar").style.display = "none"),
          $("#choicetext").hide(),
          (document.getElementById("firebaseui-auth-container").style.display =
            "none");
      }),
      $("#discount20").click(function() {
        (document.getElementById("coupon").value = "LPC20"),
          copyToClipboard("#discount20code"),
          $("html, body").animate(
            { scrollTop: $("#Pin-message").offset().top },
            1e3
          );
      }),
      $("#discount5").click(function() {
        (document.getElementById("coupon").value = "FIRSTORDER"),
          $("html, body").animate(
            { scrollTop: $("#Pin-message").offset().top },
            1e3
          );
      }),
      $("#discount10").click(function() {
        (document.getElementById("coupon").value = "REORDER"),
          $("html, body").animate(
            { scrollTop: $("#Pin-message").offset().top },
            1e3
          );
      }),
      $("#sameday").click(function() {
        (document.getElementById("coupon").value = "SAMEDAY"),
          $("html, body").animate(
            { scrollTop: $("#Pin-message").offset().top },
            1e3
          );
      }),
      $("#noColor, #oneColor, #bothColor").click(function() {
        ipLookUp("hiddenlocation2"),
          addLightbox(),
          bar.animate(0.25),
          $("#colorChoice").fadeOut(250, function() {
            $("#coinSizing").fadeIn(250);
          });
      }),
      $(
        "#size150, #size175, #size200, #size225, #size250, #size275, #size300"
      ).click(function() {
        bar.animate(0.35),
          $("#coinSizing").fadeOut(250, function() {
            $("#coinPlating").fadeIn(250);
          });
      }),
      $(
        "#polishedGold, #antiqueGold, #polishedSilver, #antiqueSilver, #polishedCopper, #antiqueCopper, #polishedBlack, #dual, #polishedNickel, #colorCoated"
      ).click(function() {
        bar.animate(0.45),
          $("#coinPlating").fadeOut(250, function() {
            $("#bezelChoice").fadeIn(250);
          });
      }),
      $("#plain, #rope, #spur, #oblique, #crosscut, #bezeled").click(
        function() {
          bar.animate(0.55),
            $("#bezelChoice").fadeOut(250, function() {
              $("#packaging").fadeIn(250);
            });
        }
      ),
      $("#velvetCase, #velvet, #acrylicCase, #poly").click(function() {
        ($thiscoin = $(".hidemepls3")),
          $("#packaging").fadeOut(250, function() {
            $thiscoin.fadeIn(250), $thiscoin.removeClass("hidemepls3");
          }),
          bar.animate(0.65);
      }),
      $("#toContact2").click(function() {
        "" == document.getElementById("Coin-message").value &&
        0 == selectedFile.length &&
        0 == selectedFileBack.length
          ? Swal.fire(
              "We need some details!",
              "In order to create your custom item, we either need reference files or a design description. Please be specific if you choose not to upload files.",
              "warning"
            )
          : (($contactinfocoin = $(".hidemepls4")),
            handleFileUploadSubmit2(),
            handleFileUploadSubmit3(),
            $($thiscoin).fadeOut(100, function() {
              (document.getElementById("hiddenForm2").style.display = "none"),
                $contactinfocoin.removeClass("hidemepls4"),
                $contactinfocoin.fadeIn(250);
            }),
            bar.animate(0.95),
            $("html, body").animate({ scrollTop: 0 }, 500),
            (document.getElementById("userID2").value = uid));
      }),
      // $("#struck, #softenamel, #silk, #offset, #cloisonne").click(function () {
      //   ipLookUp("hiddenlocation"),
      //     bar.animate(0.25),
      //     $("#styleChoice").fadeOut(250, function () {
      //       $("#pinSizing").fadeIn(250);
      //     });
      // }),
      $("#struck, #softenamel, #silk, #offset, #cloisonne").click(function() {
        ipLookUp("hiddenlocation"),
          bar.animate(0.25),
          $("#styleChoice").fadeOut(250, function() {
            $("#pinSizing").fadeIn(250);
          });
      }),
      $(
        "#size075p, #size100p, #size125p, #size150p, #size175p, #size200p, #size225p, #size250p"
      ).click(function() {
        $("#pinSizing").fadeOut(250, function() {
          $("#pinPlating").fadeIn(250);
        }),
          bar.animate(0.35);
      }),
      $(
        "#polishedGoldp, #antiqueGoldp, #polishedSilverp, #antiqueSilverp, #polishedCopperp, #antiqueCopperp, #polishedBlackp, #dualp, #polishedNickelp, #colorCoatedp"
      ).click(function() {
        $("#pinPlating").fadeOut(250, function() {
          $("#pinBacking").fadeIn(250);
        }),
          bar.animate(0.45);
      }),
      $(
        "#butterfly, #deluxe, #jewelry, #cufflink, #blackrubber, #yellowrubber, #deluxe, #keychainaddon, #roundmagnet, #barmagnet, #safetypin"
      ).click(function() {
        $("#pinBacking").fadeOut(250, function() {
          $("#pinPackaging").fadeIn(250);
        }),
          bar.animate(0.55);
      }),
      $("#velvetCasep, #velvetp, #acrylicCasep, #polyp").click(function() {
        ($this = $(".hidemepls")),
          $("#pinPackaging").fadeOut(250, function() {
            $this.fadeIn(250), $this.removeClass("hidemepls");
          }),
          bar.animate(0.65);
      }),
      $("#toContact").click(function() {
        "" == document.getElementById("Pin-message").value &&
        0 == selectedFile.length
          ? Swal.fire(
              "We need some details!",
              "In order to create your custom item, we either need reference files or a design description. Please be specific if you choose not to upload files.",
              "warning"
            )
          : (($contactinfo = $(".hidemepls2")),
            handleFileUploadSubmit(),
            $($this).fadeOut(100, function() {
              (document.getElementById("hiddenForm1").style.display = "none"),
                $contactinfo.removeClass("hidemepls2"),
                $contactinfo.fadeIn(250);
            }),
            bar.animate(0.95),
            $("html, body").animate({ scrollTop: 0 }, 500),
            (document.getElementById("userID").value = uid));
      }),
      $("#offsetKeychain, #dieKeychain, #enamelKeychain").click(function() {
        ipLookUp("hiddenlocation3"),
          $("#chainStyle").fadeOut(250, function() {
            $("#chainSizing").fadeIn(250);
          }),
          bar.animate(0.25);
      }),
      $(
        "#size175kc, #size075kc, #size200kc, #size225kc, #size250kc, #size100kc, #size125kc, #size150kc, #size275kc, #size300kc"
      ).click(function() {
        $("#chainSizing").fadeOut(250, function() {
          $("#chainPlating").fadeIn(250);
        }),
          bar.animate(0.35);
      }),
      $(
        "#polishedGoldkc, #antiqueGoldkc, #polishedSilverkc, #antiqueSilverkc, #polishedCopperkc, #antiqueCopperkc, #polishedBlackkc, #dualkc, #polishedNickelkc, #colorCoatedkc"
      ).click(function() {
        $("#chainPlating").fadeOut(250, function() {
          $("#chainPackaging").fadeIn(250);
        }),
          bar.animate(0.45);
      }),
      $("#velvetCasekc, #velvetkc, #acrylicCasekc, #polykc").click(function() {
        ($thischain = $(".hidemepls5")),
          $("#chainPackaging").fadeOut(250, function() {
            $thischain.fadeIn(250), $thischain.removeClass("hidemepls5");
          }),
          bar.animate(0.65);
      }),
      $("#toContact3").click(function() {
        "" == document.getElementById("Chain-message").value &&
        0 == selectedFile.length &&
        0 == selectedFileBack.length
          ? Swal.fire(
              "We need some details!",
              "In order to create your custom item, we either need reference files or a design description. Please be specific if you choose not to upload files.",
              "warning"
            )
          : (($contactinfochain = $(".hidemepls6")),
            handleFileUploadSubmit4(),
            handleFileUploadSubmit5(),
            $($thischain).fadeOut(100, function() {
              (document.getElementById("hiddenForm3").style.display = "none"),
                $contactinfochain.removeClass("hidemepls6"),
                $contactinfochain.fadeIn(250);
            }),
            bar.animate(0.95),
            $("html, body").animate({ scrollTop: 0 }, 500),
            (document.getElementById("userID3").value = uid));
      });
  });
const storageRef = firebase.storage().ref();
var uiConfig = {
    callbacks: {
      signInSuccessWithAuthResult: function(e, t) {
        return !1;
      },
      uiShown: function() {}
    },
    signInFlow: "popup",
    signInSuccessUrl: "https://lapelpinsandcoins.com/quote",
    signInOptions: [
      { provider: firebase.auth.GoogleAuthProvider.PROVIDER_ID },
      { provider: firebase.auth.FacebookAuthProvider.PROVIDER_ID },
      {
        provider: firebase.auth.EmailAuthProvider.PROVIDER_ID,
        requireDisplayName: !1,
        signInMethod:
          firebase.auth.EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD,
        forceSameDevice: !1
      },
      { provider: firebase.auth.PhoneAuthProvider.PROVIDER_ID }
    ],
    tosUrl: "https://lapelpinsandcoins.com/tos",
    privacyPolicyUrl: "https://lapelpinsandcoins.com/privacy"
  },
  ui = new firebaseui.auth.AuthUI(firebase.auth());
ui.start("#firebaseui-auth-container", uiConfig),
  document
    .getElementById("filepond1")
    .addEventListener("change", handleFileUploadChange),
  document
    .getElementById("filepond2")
    .addEventListener("change", handleFileUploadChange),
  document
    .getElementById("filepond3")
    .addEventListener("change", handleFileUploadChangeBack),
  document
    .getElementById("filepond4")
    .addEventListener("change", handleFileUploadChange),
  document
    .getElementById("filepond5")
    .addEventListener("change", handleFileUploadChangeBack);
var username = "User";
let selectedFile = [],
  selectedFileBack = [];
function handleFileUploadChange(e) {
  if (1 == e.target.files.length) selectedFile.push(e.target.files[0]);
  else
    for (let t = 0; t < e.target.files.length; t++)
      selectedFile.push(e.target.files[t]);
  for (let e = 0; e < selectedFile.length; e++)
    ".pdf" == selectedFile[e].name.slice(selectedFile[e].name.indexOf(".")) &&
      Swal.fire(
        "File(s) Uploaded!",
        "You can undo this by deleting the file.",
        "success"
      );
}
function handleFileUploadChangeBack(e) {
  if (1 == e.target.files.length) selectedFileBack.push(e.target.files[0]);
  else
    for (let t = 0; t < e.target.files.length; t++)
      selectedFileBack.push(e.target.files[t]);
  for (let e = 0; e < selectedFileBack.length; e++)
    ".pdf" ==
      selectedFileBack[e].name.slice(selectedFileBack[e].name.indexOf(".")) &&
      Swal.fire(
        "File(s) Uploaded!",
        "You can undo this by deleting the file.",
        "success"
      );
}
function ipLookUp(e) {
  $.ajax(
    "https://api.ipgeolocation.io/ipgeo?apiKey=fd9729e680994b6392f0b1480fa3f236&fields=city,state_prov,country_name"
  ).then(
    function(t) {
      updateAddress(
        e,
        t.city.toString(),
        t.country_name.toString(),
        t.state_prov.toString()
      );
    },
    function(e, t) {
      console.log("Request failed.  Returned status of", t);
    }
  );
}
function updateAddress(e, t, n, i) {
  try {
    document.getElementById(e).value = t + ", " + i + ", " + n;
  } catch (e) {
    console.log(e);
  }
}
function handleFileUploadSubmit(e) {
  var t = removeDuplicates(selectedFile, "name");
  for (let e = 0; e < t.length; e++) {
    var n =
      uid +
      "/" +
      getDate() +
      "--Pin--" +
      (e + 1).toString() +
      "-" +
      uid +
      t[e].name.slice(t[e].name.indexOf("."));
    const i = storageRef.child("Quotes/Lapel Pins/" + n).put(t[e]);
    i.on(
      "state_changed",
      function(e) {},
      function(e) {
        alert(
          "We only accept certain files (png, jpeg, ppt, pdf, etc.) due to security reasons. Thank you for understanding."
        );
      },
      function() {
        console.log("File successfully uploaded (pin)"),
          i.snapshot.ref.getDownloadURL().then(function(e) {
            document.getElementById("hiddenlink").value +=
              "File: " + e.toString() + "  ";
          });
      }
    );
  }
}
function handleFileUploadSubmit2(e) {
  var t = removeDuplicates(selectedFile, "name");
  for (let e = 0; e < t.length; e++) {
    var n =
      uid +
      "/" +
      getDate() +
      "--Coin-Front--" +
      (e + 1).toString() +
      "-" +
      uid +
      t[e].name.slice(t[e].name.indexOf("."));
    const i = storageRef.child("Quotes/Challenge Coins/" + n).put(t[e]);
    i.on(
      "state_changed",
      function(e) {},
      function(e) {
        alert(
          "We only accept certain files (png, jpeg, ppt, pdf, etc.) due to security reasons. Thank you for understanding."
        );
      },
      function() {
        console.log("File successfully uploaded (coin front)"),
          i.snapshot.ref.getDownloadURL().then(function(e) {
            document.getElementById("hiddenlink2").value +=
              "File: " + e.toString() + "  ";
          });
      }
    );
  }
}
function handleFileUploadSubmit3(e) {
  var t = removeDuplicates(selectedFileBack, "name");
  for (let e = 0; e < t.length; e++) {
    var n =
      uid +
      "/" +
      getDate() +
      "--Coin-Back--" +
      (e + 1).toString() +
      "-" +
      uid +
      t[e].name.slice(t[e].name.indexOf("."));
    const i = storageRef.child("Quotes/Challenge Coins/" + n).put(t[e]);
    i.on(
      "state_changed",
      function(e) {},
      function(e) {
        alert(
          "We only accept certain files (png, jpeg, ppt, pdf, etc.) due to security reasons. Thank you for understanding."
        );
      },
      function() {
        console.log("File successfully uploaded (coin back)"),
          i.snapshot.ref.getDownloadURL().then(function(e) {
            document.getElementById("hiddenlink3").value +=
              "File: " + e.toString() + "  ";
          });
      }
    );
  }
}
function handleFileUploadSubmit4(e) {
  var t = removeDuplicates(selectedFile, "name");
  for (let e = 0; e < t.length; e++) {
    var n =
      uid +
      "/" +
      getDate() +
      "--Keychain-Front--" +
      (e + 1).toString() +
      "-" +
      uid +
      t[e].name.slice(t[e].name.indexOf("."));
    const i = storageRef.child("Quotes/Keychains/" + n).put(t[e]);
    i.on(
      "state_changed",
      function(e) {},
      function(e) {
        alert(
          "We only accept certain files (png, jpeg, ppt, pdf, etc.) due to security reasons. Thank you for understanding."
        );
      },
      function() {
        console.log("File successfully uploaded (keychain front)"),
          i.snapshot.ref.getDownloadURL().then(function(e) {
            document.getElementById("hiddenlink4").value +=
              "File: " + e.toString() + "  ";
          });
      }
    );
  }
}
function handleFileUploadSubmit5(e) {
  var t = removeDuplicates(selectedFileBack, "name");
  for (let e = 0; e < t.length; e++) {
    var n =
      uid +
      "/" +
      getDate() +
      "--Keychain-Back--" +
      (e + 1).toString() +
      "-" +
      uid +
      t[e].name.slice(t[e].name.indexOf("."));
    const i = storageRef.child("Quotes/Keychains/" + n).put(t[e]);
    i.on(
      "state_changed",
      function(e) {},
      function(e) {
        alert(
          "We only accept certain files (png, jpeg, ppt, pdf, etc.) due to security reasons. Thank you for understanding."
        );
      },
      function() {
        console.log("File successfully uploaded (keychain back)"),
          i.snapshot.ref.getDownloadURL().then(function(e) {
            document.getElementById("hiddenlink5").value +=
              "File: " + e.toString() + "  ";
          });
      }
    );
  }
}
$(document).ready(function() {
  var e = $(".contenty"),
    t = e.filter(".activey"),
    n = ($(".card").filter(".steps"), $(".inactive-1")),
    i = $(".inactive-2");
  $(".advance").click(function() {
    var a = t.next(),
      o = e.last(),
      l = e.first();
    t.removeClass("activey"),
      t.is(o)
        ? ((t = l.addClass("activey")).css({ right: "10%", opacity: "1" }),
          $(".step").animate({ width: "33%" }),
          n.animate(
            { height: "8px", marginLeft: "20px", marginRight: "20px" },
            100
          ),
          i.animate(
            { height: "8px", marginLeft: "10px", marginRight: "10px" },
            100
          ))
        : t.is(l)
        ? (t.animate({ opacity: 0 }, 1e3),
          (t = a.addClass("activey")),
          $(".step").animate({ width: "66%" }),
          i.animate(
            { height: "0", marginLeft: "0px", marginRight: "0px" },
            100
          ))
        : ((t = a.addClass("activey")),
          $(".step").animate({ width: "100%" }),
          n.animate(
            { height: "0", marginLeft: "0px", marginRight: "0px" },
            100
          ));
  });
});
var loadDeferredStyles = function() {
    var e = document.getElementById("deferred-styles"),
      t = document.createElement("div");
    (t.innerHTML = e.textContent),
      document.body.appendChild(t),
      e.parentElement.removeChild(e);
  },
  raf =
    window.requestAnimationFrame ||
    window.mozRequestAnimationFrame ||
    window.webkitRequestAnimationFrame ||
    window.msRequestAnimationFrame;
function checkRadios() {
  document.getElementById("size225").checked
    ? ($("#velvetbagcost").text("Velvet Bag: $0.80"),
      $("#velvetcasecost").text("Velvet Case: $4.25"),
      $("#acryliccasecost").text("Acrylic Case: $1.25"))
    : document.getElementById("size250").checked
    ? ($("#velvetbagcost").text("Velvet Bag: $1.05"),
      $("#velvetcasecost").text("Velvet Case: $4.50"),
      $("#acryliccasecost").text("Acrylic Case: $1.50"))
    : document.getElementById("size275").checked
    ? ($("#velvetbagcost").text("Velvet Bag: $1.30"),
      $("#velvetcasecost").text("Velvet Case: $4.75"),
      $("#acryliccasecost").text("Acrylic Case: $1.75"))
    : document.getElementById("size300").checked
    ? ($("#velvetbagcost").text("Velvet Bag: $1.55"),
      $("#velvetcasecost").text("Velvet Case: $5.00"),
      $("#acryliccasecost").text("Acrylic Case: $2.00"))
    : ($("#velvetbagcost").text("Velvet Bag: $0.55"),
      $("#velvetcasecost").text("Velvet Case: $4.00"),
      $("#acryliccasecost").text("Acrylic Case: $1.00"));
}
function checkRadiosp() {
  document.getElementById("size200p").checked
    ? ($("#velvetbagcostp").text("Velvet Bag: $0.80"),
      $("#velvetcasecostp").text("Velvet Case: $4.25"),
      $("#acryliccasecostp").text("Acrylic Case: $1.25"))
    : document.getElementById("size225p").checked
    ? ($("#velvetbagcostp").text("Velvet Bag: $1.05"),
      $("#velvetcasecostp").text("Velvet Case: $4.50"),
      $("#acryliccasecostp").text("Acrylic Case: $1.50"))
    : document.getElementById("size250p").checked
    ? ($("#velvetbagcostp").text("Velvet Bag: $1.30"),
      $("#velvetcasecostp").text("Velvet Case: $4.75"),
      $("#acryliccasecostp").text("Acrylic Case: $1.75"))
    : ($("#velvetbagcostp").text("Velvet Bag: $0.55"),
      $("#velvetcasecostp").text("Velvet Case: $4.00"),
      $("#acryliccasecostp").text("Acrylic Case: $1.00"));
}
function anonLogin() {
  firebase
    .auth()
    .signInAnonymously()
    .catch(function(e) {
      e.code, e.message;
    }),
    console.log("Successful anon login.");
}
function getDate() {
  var e = new Date(),
    t = String(e.getDate()),
    n = String(e.getMonth() + 1),
    i = e.getFullYear();
  return (e = n + "-" + t + "-" + i);
}
function removeDuplicates(e, t) {
  var n = [],
    i = {};
  for (var a in e) i[e[a][t]] = e[a];
  for (a in i) n.push(i[a]);
  return n;
}
function displayBlock(e) {
  for (
    var t = document.getElementsByClassName(e), n = t.length, i = 0;
    i < n;
    i++
  )
    t[i].style.display = "block";
}
raf
  ? raf(function() {
      window.setTimeout(loadDeferredStyles, 0);
    })
  : window.addEventListener("load", loadDeferredStyles);
var isAnon = !1,
  uid = null;
function loginscreen() {
  $("#LapelPin").click(function() {
    (document.getElementById("firebaseui-auth-container").style.display =
      "block"),
      (document.getElementById("rstbtn").style.display = "block"),
      $("#choicetext").show();
  }),
    $("#ChallengeCoin").click(function() {
      (document.getElementById("firebaseui-auth-container").style.display =
        "block"),
        (document.getElementById("rstbtn").style.display = "block"),
        $("#choicetext").show();
    }),
    $("#Keychain").click(function() {
      (document.getElementById("firebaseui-auth-container").style.display =
        "block"),
        (document.getElementById("rstbtn").style.display = "block"),
        $("#choicetext").show();
    });
}
function upgradeUser(e) {
  var t = firebase.auth().currentUser;
  switch (e) {
    case 1:
      t
        .updateProfile({
          displayName: document.getElementById("Pin-FullName").value
        })
        .then(function() {
          (username = t.displayName), console.log("Display Name Updated");
        })
        .catch(function(e) {}),
        t
          .updateEmail(document.getElementById("Pin-email").value)
          .then(function() {
            console.log("Email updated successfully.");
          })
          .catch(function(e) {
            console.log(e);
          });
      break;
    case 2:
      t
        .updateProfile({
          displayName: document.getElementById("Coin-FullName").value
        })
        .then(function() {
          (username = t.displayName), console.log("Display Name Updated");
        })
        .catch(function(e) {}),
        t
          .updateEmail(document.getElementById("Coin-email").value)
          .then(function() {
            console.log("Email updated successfully.");
          })
          .catch(function(e) {
            console.log(e);
          });
      break;
    case 3:
      t
        .updateProfile({
          displayName: document.getElementById("Chain-FullName").value
        })
        .then(function() {
          (username = t.displayName), console.log("Display Name Updated");
        })
        .catch(function(e) {}),
        t
          .updateEmail(document.getElementById("Chain-email").value)
          .then(function() {
            console.log("Email updated successfully.");
          })
          .catch(function(e) {
            console.log(e);
          });
      break;
    default:
      console.log("ya messed up ken");
  }
}
firebase.auth().onAuthStateChanged(function(e) {
  e
    ? ((isAnon = e.isAnonymous),
      (uid = e.uid),
      (document.getElementById("firebaseui-auth-container").style.display =
        "none"),
      (document.getElementById("choicetext").style.display = "none"),
      displayBlock("pinContact"),
      displayBlock("chainContact"),
      displayBlock("coinContact"),
      (document.getElementById("rstbtn").style.display = "none"),
      (document.getElementById("hiddenForm1").style.display = "block"),
      (document.getElementById("hiddenForm2").style.display = "block"),
      (document.getElementById("hiddenForm3").style.display = "block"),
      (document.getElementById("pinsubmit").style.display = "block"),
      bar.animate(0.05),
      isAnon
        ? ($("#pinForm").submit(function() {
            return upgradeUser(1), !0;
          }),
          $("#coinForm").submit(function() {
            return upgradeUser(2), !0;
          }),
          $("#chainForm").submit(function() {
            return upgradeUser(3), !0;
          }))
        : ((document.getElementById(
            "Pin-FullName"
          ).value = e.displayName.toString()),
          (document.getElementById("Pin-email").value = e.email.toString()),
          (document.getElementById(
            "Coin-FullName"
          ).value = e.displayName.toString()),
          (document.getElementById("Coin-email").value = e.email.toString()),
          (document.getElementById(
            "Chain-FullName"
          ).value = e.displayName.toString()),
          (document.getElementById("Chain-email").value = e.email.toString()),
          (username = e.displayName.toString())),
      console.log("User " + uid + " is logged in."))
    : (loginscreen(), console.log("User is not logged in."));
});
